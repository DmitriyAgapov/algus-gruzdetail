block variables
include helpers/mixins
include ../../node_modules/bemto.jade/bemto

doctype html
html(lang="ru")
    head
        meta(charset="utf-8")
        meta(http-equiv="X-UA-Compatible" content="IE=edge")
        title #{title}
        meta(name='description' content=description)
        meta(name='keywords' content=keywords)
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        link(rel="shortcut icon" href="img/favicon/favicon.ico" type="image/vnd.microsoft.icon")
        //- информация об устаревшем браузере
        //- script(src='https://yastatic.net/browser-updater/v1/script.js', charset='utf-8')
        //-script var yaBrowserUpdater = new ya.browserUpdater.init({"lang":"ru","browsers":{"yabrowser":"15.12","chrome":"54","ie":"10","opera":"41","safari":"8","fx":"49","iron":"35","flock":"Infinity","palemoon":"25","camino":"Infinity","maxthon":"4.5","seamonkey":"2.3"},"theme":"yellow"});

        //-+style("http://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css")
        +style('https://unpkg.com/swiper@6.4.11/swiper-bundle.min.css')
        +style("https://cdn.jsdelivr.net/npm/lightgallery/dist/css/lightgallery.min.css")
        //+style("css/common/jquery.custom-scrollbar_common.css")
        //+style("css/common/jquery.mCustomScrollbar_common.css")
        //+style("css/common/jquery.scrollbar_common.css")
        //+style("css/common/lightgallery_common.css")

        +script('https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js')
        +script("https://code.jquery.com/ui/1.12.1/jquery-ui.min.js")
        +script('https://unpkg.com/swiper@6.4.11/swiper-bundle.min.js')
        +script('https://cdn.jsdelivr.net/npm/jquery-once@2.2.0/jquery.once.min.js')
        +script('https://cdn.jsdelivr.net/npm/lightgallery/dist/js/lightgallery-all.min.js')
        +script('js/common/jquery.custom-scrollbar_common.js')
        //+script('js/common/jquery.mCustomScrollbar_common.js')
        //+script('js/common/jquery.scrollbar_common.js')
        //+script('js/common/lightgallery_common.js')
        +script('js/common/plugins_common.js')
        +script('js/common/classie_common.js')
        +script('js/common/theme_common.js')
        +script("http://uralval.algus.net/libraries/jquery.intl-tel-input/build/js/utils.js")
        +script("https://cdn.jsdelivr.net/npm/inputmask/dist/min/jquery.inputmask.bundle.min.js")
        +script("http://uralval.algus.net/libraries/jquery.intl-tel-input/build/js/intlTelInput.min.js?v=16.1.0")
        +script("http://uralval.algus.net/libraries/jquery.intl-tel-input/build/js/intlTelInput-jquery.min.js?v=16.1.0")
        +script("http://uralval.algus.net/libraries/jquery.intl-tel-input/build/js/utils.js")

    body(class=pageClass)

        //newstyle1: cssfile[font-awesome_common --global] scriptfile[]

        //newstyle1: cssfile[common_style1] scriptfile[]
        //newstyle1: cssfile[drupal-file-upload_style1] scriptfile[drupal-file-upload-lib_common --global, drupal-file-upload_common]
        //newstyle1: cssfile[drupal-menu_style1] scriptfile[]
        //newstyle1: cssfile[drupal-message_common] scriptfile[]
        //newstyle1: cssfile[drupal-modal_style1] scriptfile[]
        //newstyle1: cssfile[drupal-pager_style1] scriptfile[]
        //newstyle1: cssfile[drupal-select_style1] scriptfile[drupal-select-lib_common --global, drupal-select_common]
        //newstyle1: cssfile[drupal-tabs_common] scriptfile[]
        //newstyle1: cssfile[drupal-webform_style1] scriptfile[]
        //newstyle1: cssfile[ck-template_common] scriptfile[]
        //newstyle1: cssfile[drupal-admin-panel_common] scriptfile[]
        //newstyle1: cssfile[drupal-ajax_common] scriptfile[]
        //newstyle1: cssfile[drupal-block_style1] scriptfile[]
        //newstyle1: cssfile[drupal-regions_style1] scriptfile[]
        //newstyle1: cssfile[drupal-section_style1] scriptfile[]

        //newstyle1: cssfile[] scriptfile[plugins]
        //newstyle1: cssfile[] scriptfile[theme]

        //- build:remove
        include ../components/algus-setting/algus-setting-default
        include ../components/algus-setting/algus-setting
        include ../components/algus-setting/algus-panel
        //- endbuild

        block content
        block styles
        block scripts

        // это для разработки
        //+script('https://cdn.jsdelivr.net/npm/jquery-once@2.2.0/jquery.once.min.js')
        script.
            (function($) {
                $(document).ready(function(){

                    $('a[href="#open-modal-kp"]').on('click', function() {
                        $('.modal-kp').dialog({
                            //- show: { effect: "fade", duration: 300 },
                            //- hide: { effect: "fade", duration: 300 },
                            title: 'Коммерческое предложение',
                            modal: true,
                            width: 990,
                            height: 'auto',
                            draggable: false,
                            resizable: false,
                            buttons: [
                                {
                                    text: "Отправить",
                                    // class: 'btn btn_primary btn_size-2',
                                    click: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            ],
                            open: function( event, ui ) {
                                if ($('.ui-dialog:visible').length) {
                                    // $('body').pageScrollHide(); // БЛОЧИМ ПОЛОСУ ПРОКРУТКИ У СТРАНИЦЫ
                                    if ( !$('.ui-dialog-wrapper').length ) {
                                        $('.ui-dialog').wrap('<div class="ui-dialog-wrapper"></div>');
                                    }
                                    $('.ui-dialog-buttonpane').find('button').removeClass('ui-button');
                                }
                            },
                            close: function( event, ui ) {
                                $('.ui-dialog-wrapper').remove();
                                $('body').pageScrollShow(); // РАЗРЕШАЕМ ПОЛОСУ ПРОКРУТКИ У СТРАНИЦЫ
                            },
                        });
                    });
                    $('a[href="#open-modal-leasing"]').on('click', function() {
                        $('.modal-leasing').dialog({
                            //- show: { effect: "fade", duration: 300 },
                            //- hide: { effect: "fade", duration: 300 },
                            title: 'Купить в лизинг',
                            modal: true,
                            width: 990,
                            height: 'auto',
                            draggable: false,
                            resizable: false,
                            buttons: [
                                {
                                    text: "Отправить",
                                    // class: 'btn btn_primary btn_size-2',
                                    click: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            ],
                            open: function( event, ui ) {
                                if ($('.ui-dialog:visible').length) {
                                    // $('body').pageScrollHide(); // БЛОЧИМ ПОЛОСУ ПРОКРУТКИ У СТРАНИЦЫ
                                    if ( !$('.ui-dialog-wrapper').length ) {
                                        $('.ui-dialog').wrap('<div class="ui-dialog-wrapper"></div>');
                                    }
                                    $('.ui-dialog-buttonpane').find('button').removeClass('ui-button');
                                }
                            },
                            close: function( event, ui ) {
                                $('.ui-dialog-wrapper').remove();
                                $('body').pageScrollShow(); // РАЗРЕШАЕМ ПОЛОСУ ПРОКРУТКИ У СТРАНИЦЫ
                            },
                        });
                    });
                    $('a[href="#open-modal-shipment"]').on('click', function() {
                        $('.modal-shipment').dialog({
                            title: null,
                            modal: true,
                            width: 750,
                            height: 'auto',
                            // maxHeight: 768,
                            draggable: false,
                            resizable: false,
                            // buttons: [
                            //     {
                            //         text: "Отправить",
                            //         class: 'btn btn_primary btn_size-2',
                            //         click: function () {
                            //             $(this).dialog("close");
                            //         }
                            //     }
                            // ],
                            open: function( event, ui ) {
                                if ($('.ui-dialog:visible').length) {
                                    // $('body').pageScrollHide(); // БЛОЧИМ ПОЛОСУ ПРОКРУТКИ У СТРАНИЦЫ
                                    if ( !$('.ui-dialog-wrapper').length ) {
                                        $('.ui-dialog').wrap('<div class="ui-dialog-wrapper"></div>');
                                    }
                                    $('.ui-dialog-buttonpane').find('button').removeClass('ui-button');
                                }
                            },
                            close: function( event, ui ) {
                                $('.ui-dialog-wrapper').remove();
                                $('body').pageScrollShow(); // РАЗРЕШАЕМ ПОЛОСУ ПРОКРУТКИ У СТРАНИЦЫ
                            },
                        });
                    });
                    $('.search').each(function () {
                        var thisSearch = $(this);
                        var searchField = thisSearch.find('.form-text');
                        var searchResult = thisSearch.find('.search-result');
                        searchResult.css({'opacity': '0', 'visibility': 'hidden'});
                        searchField.on('focus', function () {
                            searchResult.css({'opacity': '1', 'visibility': 'visible'});
                        });
                        searchField.on('blur', function () {
                            if (searchField.val() === '') {
                                searchResult.css({'opacity': '0', 'visibility': 'hidden'});
                            }
                        });
                    });
                    $(document).click(function (event) {
                        if ($(event.target).closest(".search").length) return;
                        $('.search-result').css({'opacity': '0', 'visibility': 'hidden'});
                        event.stopPropagation();
                    });

                });
            })(jQuery);

        //style.
        //    /*.settings-block-wrapper {*/
        //    /*    position: relative;*/
        //    /*}*/
        //    /*.settings-block-wrapper .block {*/
        //    /*    margin-top: 0 !important;*/
        //    /*}*/
        //    .js-block:not(.js-block-hide) {
        //        /*margin-top: 0 !important;*/
        //        /*margin-bottom: 0 !important;*/
        //    }
        //    .js-block-hide {
        //        display: none;
        //    }
        //
        //    .setting {
        //        position: absolute;
        //        top: 10px;
        //        right: 10px;
        //        z-index: 3;
        //        cursor: pointer;
        //    }
        //    .setting:hover .setting__list {
        //        display: block;
        //    }
        //    .setting:hover:before {
        //        background-image: url(https://tenik-miass.ru/core/themes/stable/images/core/icons/787878/pencil.svg);
        //    }
        //    .setting:focus:before {
        //        background-image: url(https://tenik-miass.ru/core/themes/stable/images/core/icons/5181c6/pencil.svg);
        //    }
        //    .setting:hover .setting__icon {
        //        z-index: 2;
        //        border-bottom-color: #fff;
        //        border-radius: 13px 13px 0 0;
        //        margin-bottom: -1px;
        //    }
        //    .setting__icon {
        //        width: 28px;
        //        height: 28px;
        //        border-radius: 13px;
        //        overflow: hidden;
        //        border: 1px solid #ccc;
        //        z-index: 2;
        //    }
        //    .setting__icon:before {
        //        content: '\f013';
        //        font-family: "Font Awesome 5 Pro";
        //        font-weight: 100;
        //        line-height: 1;
        //        position: absolute;
        //        top: 0;
        //        right: 0;
        //        bottom: 0;
        //        left: 0;
        //        width: 26px;
        //        height: 26px;
        //        background-color: #fff;
        //        display: flex;
        //        justify-content: center;
        //        align-items: center;
        //    }
        //    .setting__text {
        //        position: absolute;
        //        top: 4px;
        //        right: 100%;
        //        z-index: 0;
        //        color: #000;
        //        white-space: nowrap;
        //        padding: 1px 8px 2px;
        //        border-radius: 13px;
        //        font-size: 13px;
        //    }
        //    .setting__list {
        //        display: none;
        //        border: 1px solid #ccc;
        //        border-radius: 4px 0 4px 4px;
        //        background-color: #fff;
        //        position: absolute;
        //        top: 100%;
        //        right: 0;
        //        transition: all 0.25s ease-in-out;
        //        white-space: nowrap;
        //        font-size: 14px;
        //        padding: 10px;
        //        z-index: 0;
        //    }
        //    .setting__item {
        //        margin-bottom: 5px;
        //        cursor: pointer;
        //        color: #000;
        //    }
        //    .setting__item.active {
        //        color: red;
        //    }
        //    .setting__item:last-child {
        //        margin-bottom: 0;
        //    }
        //    .setting__item span {
        //        padding: 3px;
        //        border-bottom: 1px solid transparent;
        //    }
        //    .setting__item span:hover {
        //        border-bottom-color: #000;
        //    }
        //    .block-hover::before {
        //        content: '';
        //        position: absolute;
        //        top: 0;
        //        right: 0;
        //        bottom: 0;
        //        left: 0;
        //        border: 1px dashed #000;
        //        z-index: 3;
        //    }
        //// КОНЕЦ: это для разработки
